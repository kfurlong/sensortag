<!-- HTML header for doxygen 1.8.9.1-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.9.1"/>
<title>TI-RTOS for SimpleLink Wireless MCUs: PWMTiva.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<table width="100%">
<tr>
  <td bgcolor="black" width="1"><a href="http://www.ti.com"><img border="0" src="tilogo.gif" /></a></td>
  <td bgcolor="red"><img src="titagline.gif" /></td>
</tr>
</table>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">TI-RTOS for SimpleLink Wireless MCUs
   &#160;<span id="projectnumber">2.13.00.06</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.9.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_b7f13d33c9ff829e41eca277e5b10f32.html">tirtos_simplelink_2_13_00_06</a></li><li class="navelem"><a class="el" href="dir_914ef8c92054fbd19b873011105ec041.html">packages</a></li><li class="navelem"><a class="el" href="dir_abd11468e5a5b51896344ba99410f96c.html">ti</a></li><li class="navelem"><a class="el" href="dir_91d6028ef0aa1035242bfefa07cd806e.html">drivers</a></li><li class="navelem"><a class="el" href="dir_cad17b9f769a17e178b8a9a80c710d7b.html">pwm</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">PWMTiva.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>PWM driver implementation for Tiva PWM perhiperals. </p>
<p>============================================================================</p>
<p>The PWM header file should be included in an application as follows: </p><div class="fragment"><div class="line"><span class="preprocessor">#include &lt;<a class="code" href="_p_w_m_8h.html">ti/drivers/PWM.h</a>&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;<a class="code" href="_p_w_m_tiva_8h.html">ti/drivers/pwm/PWMTiva.h</a>&gt;</span></div>
</div><!-- fragment --><h2>Operation</h2>
<p>This driver implementation uses the Pulse Width Modulator (PWM) peripherals present on Tiva devices to generate PWM signals. Each PWM peripheral instance contains 4 PWM signal generators, each controling 2 PWM outputs (8 PWM outputs total). This driver manages each PWM output individually (each output has it's own PWM handle/instance). However since a single clock prescalar is available for a peripheral and a generator is responsable for producing 2 outputs, there are some limitations in place to ensure proper operation:</p><ol type="1">
<li>The peripheral prescalar will be set according to the period of the first PWM instance opened. Any subsequent outputs will fail to open if a greater prescalar is required to generate the PWM period.</li>
<li>A PWM generators period is set to the period of the instance opened. Opening the second output will fail if the period used is not the same as what was set by the first output.</li>
<li>A PWM generators options are set by the first instance opened. Opening the second output will fail if the options are not the same as what was set by the first output.</li>
</ol>
<p>Since the period and duty registers are 16 bits wide the prescalar is used to divide the input clock and allow for larger periods. The maximum period supported is calculated as: MAX_PERIOD = (MAX_PRESCALAR * MAX_MATCH_VALUE) / CYCLES_PER_US 80 MHz clock: (64 * 65535) / 80 = 52428 microseconds 120 MHz clock: (64 * 65535) / 120 = 34952 microseconds</p>
<p>After opening, the <a class="el" href="_p_w_m_8h.html#ade999f5b12997479efa1ac85aaf46ef5" title="Function performs implementation specific features on a given PWM_Handle. ">PWM_control()</a> API can be used to change a PWM generator period. However, the clock prescalar is shared by all generators so the new period must be a value that can generated with the same prescaler. Also keep in mind that changing a period affects both generator outputs. The equation below can be used to determine the prescalar for a given period: The prescalar will be the following power of 2 number (2^x): prescalar = (period * CYCLES_PER_US) / MAX_MATCH_VALUE 100 microseconds = (100 * 80) / 65535 = (0.1220) = 1 10000 microseconds = (10000 * 80) / 65535 = (12.20) = 16</p>
<p>Below is an example of how to use the <a class="el" href="_p_w_m_8h.html#ade999f5b12997479efa1ac85aaf46ef5" title="Function performs implementation specific features on a given PWM_Handle. ">PWM_control()</a> API to change a period:</p>
<div class="fragment"><div class="line"><span class="preprocessor">#include &lt;<a class="code" href="_p_w_m_tiva_8h.html">ti/drivers/pwm/PWMTiva.h</a>&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;driverlib/pwm.h&gt;</span></div>
<div class="line"></div>
<div class="line"><span class="keywordtype">int</span> rc = 0;</div>
<div class="line"><span class="keywordtype">int</span> newPeriod = 2000;</div>
<div class="line"></div>
<div class="line">rc = <a class="code" href="_p_w_m_8h.html#ade999f5b12997479efa1ac85aaf46ef5">PWM_control</a>(pwmHandle, <a class="code" href="_p_w_m_tiva_8h.html#ae8518cd9113b2c8c7d671f391d0f82fd">PWMTiva_CHANGE_GEN_PERIOD</a>, &amp;newPeriod);</div>
<div class="line"><span class="keywordflow">if</span> (rc &lt; 0) {</div>
<div class="line">    <span class="comment">// handle error condition</span></div>
<div class="line">}</div>
</div><!-- fragment --><p>Finally, if the duty supplied is greater than the period; the output will remain in active state. </p><hr/>
</div><div class="textblock"><code>#include &lt;<a class="el" href="_p_w_m_8h_source.html">ti/drivers/PWM.h</a>&gt;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for PWMTiva.h:</div>
<div class="dyncontent">
<div class="center"><img src="_p_w_m_tiva_8h__incl.png" border="0" usemap="#_p_w_m_tiva_8h" alt=""/></div>
<map name="_p_w_m_tiva_8h" id="_p_w_m_tiva_8h">
<area shape="rect" href="_p_w_m_8h.html" title="PWM driver interface. " alt="" coords="26,84,143,108" /></map>
</div>
</div>
<p><a href="_p_w_m_tiva_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_p_w_m_tiva___h_w_attrs.html">PWMTiva_HWAttrs</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">PWMTiva Hardware attributes.  <a href="struct_p_w_m_tiva___h_w_attrs.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_p_w_m_tiva___status.html">PWMTiva_Status</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight"><a class="el" href="struct_p_w_m_tiva___status.html" title="PWMTiva_Status. ">PWMTiva_Status</a>.  <a href="struct_p_w_m_tiva___status.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_p_w_m_tiva___object.html">PWMTiva_Object</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">PWMTiva Object.  <a href="struct_p_w_m_tiva___object.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:ad09ddba586142f79c3c6ad6eae017374"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_p_w_m_tiva_8h.html#ad09ddba586142f79c3c6ad6eae017374">PWMTiva_NUM_PWM_PERIPHERALS</a>&#160;&#160;&#160;2</td></tr>
<tr class="separator:ad09ddba586142f79c3c6ad6eae017374"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3b71203004a2bad6632936ac4d7274de"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_p_w_m_tiva_8h.html#a3b71203004a2bad6632936ac4d7274de">PWMTiva_NUM_PWM_GENERATORS</a>&#160;&#160;&#160;4</td></tr>
<tr class="separator:a3b71203004a2bad6632936ac4d7274de"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae8518cd9113b2c8c7d671f391d0f82fd"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_p_w_m_tiva_8h.html#ae8518cd9113b2c8c7d671f391d0f82fd">PWMTiva_CHANGE_GEN_PERIOD</a>&#160;&#160;&#160;<a class="el" href="_p_w_m_8h.html#ad731f4db58c72d280900da4be6e3434c">PWM_CMD_RESERVED</a> + 0</td></tr>
<tr class="separator:ae8518cd9113b2c8c7d671f391d0f82fd"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:a9dc35e1e545e80c16d6ac60c101e2143"><td class="memItemLeft" align="right" valign="top">typedef struct <a class="el" href="struct_p_w_m_tiva___h_w_attrs.html">PWMTiva_HWAttrs</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_p_w_m_tiva_8h.html#a9dc35e1e545e80c16d6ac60c101e2143">PWMTiva_HWAttrs</a></td></tr>
<tr class="memdesc:a9dc35e1e545e80c16d6ac60c101e2143"><td class="mdescLeft">&#160;</td><td class="mdescRight">PWMTiva Hardware attributes.  <a href="#a9dc35e1e545e80c16d6ac60c101e2143">More...</a><br /></td></tr>
<tr class="separator:a9dc35e1e545e80c16d6ac60c101e2143"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a76a48f3f7fa2bec8b163b5dc1e5301ee"><td class="memItemLeft" align="right" valign="top">typedef struct <a class="el" href="struct_p_w_m_tiva___status.html">PWMTiva_Status</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_p_w_m_tiva_8h.html#a76a48f3f7fa2bec8b163b5dc1e5301ee">PWMTiva_Status</a></td></tr>
<tr class="memdesc:a76a48f3f7fa2bec8b163b5dc1e5301ee"><td class="mdescLeft">&#160;</td><td class="mdescRight"><a class="el" href="struct_p_w_m_tiva___status.html" title="PWMTiva_Status. ">PWMTiva_Status</a>.  <a href="#a76a48f3f7fa2bec8b163b5dc1e5301ee">More...</a><br /></td></tr>
<tr class="separator:a76a48f3f7fa2bec8b163b5dc1e5301ee"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6a177b361dfd0da20d6fa735b680b5c5"><td class="memItemLeft" align="right" valign="top">typedef struct <a class="el" href="struct_p_w_m_tiva___object.html">PWMTiva_Object</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_p_w_m_tiva_8h.html#a6a177b361dfd0da20d6fa735b680b5c5">PWMTiva_Object</a></td></tr>
<tr class="memdesc:a6a177b361dfd0da20d6fa735b680b5c5"><td class="mdescLeft">&#160;</td><td class="mdescRight">PWMTiva Object.  <a href="#a6a177b361dfd0da20d6fa735b680b5c5">More...</a><br /></td></tr>
<tr class="separator:a6a177b361dfd0da20d6fa735b680b5c5"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:ae9b8f538f1e9e857629220104addd24a"><td class="memItemLeft" align="right" valign="top">const <a class="el" href="struct_p_w_m___fxn_table.html">PWM_FxnTable</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_p_w_m_tiva_8h.html#ae9b8f538f1e9e857629220104addd24a">PWMTiva_fxnTable</a></td></tr>
<tr class="separator:ae9b8f538f1e9e857629220104addd24a"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a class="anchor" id="ad09ddba586142f79c3c6ad6eae017374"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define PWMTiva_NUM_PWM_PERIPHERALS&#160;&#160;&#160;2</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a3b71203004a2bad6632936ac4d7274de"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define PWMTiva_NUM_PWM_GENERATORS&#160;&#160;&#160;4</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="ae8518cd9113b2c8c7d671f391d0f82fd"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define PWMTiva_CHANGE_GEN_PERIOD&#160;&#160;&#160;<a class="el" href="_p_w_m_8h.html#ad731f4db58c72d280900da4be6e3434c">PWM_CMD_RESERVED</a> + 0</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Typedef Documentation</h2>
<a class="anchor" id="a9dc35e1e545e80c16d6ac60c101e2143"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct <a class="el" href="struct_p_w_m_tiva___h_w_attrs.html">PWMTiva_HWAttrs</a>  <a class="el" href="struct_p_w_m_tiva___h_w_attrs.html">PWMTiva_HWAttrs</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>PWMTiva Hardware attributes. </p>
<p>These fields are used by driverlib APIs and therefore must be populated by driverlib macro definitions. For TivaWare these definitions are found in:</p><ul>
<li>driverlib/pwm.h</li>
</ul>
<p>A sample structure is shown below: </p><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;const PWMTiva_HWAttrs PWMTivaHWAttrs[] = {</div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;    {</div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;        PWM0_BASE,</div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;        PWM_OUT_0,</div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;        PWM_GEN_MODE_DOWN | PWM_GEN_MODE_DBG_RUN</div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;    }</div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;};</div>
</div><!-- fragment --> 
</div>
</div>
<a class="anchor" id="a76a48f3f7fa2bec8b163b5dc1e5301ee"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct <a class="el" href="struct_p_w_m_tiva___status.html">PWMTiva_Status</a>  <a class="el" href="struct_p_w_m_tiva___status.html">PWMTiva_Status</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p><a class="el" href="struct_p_w_m_tiva___status.html" title="PWMTiva_Status. ">PWMTiva_Status</a>. </p>
<p>The application must not access any member variables of this structure! </p>

</div>
</div>
<a class="anchor" id="a6a177b361dfd0da20d6fa735b680b5c5"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct <a class="el" href="struct_p_w_m_tiva___object.html">PWMTiva_Object</a>  <a class="el" href="struct_p_w_m_tiva___object.html">PWMTiva_Object</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>PWMTiva Object. </p>
<p>The application must not access any member variables of this structure! </p>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a class="anchor" id="ae9b8f538f1e9e857629220104addd24a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="struct_p_w_m___fxn_table.html">PWM_FxnTable</a> PWMTiva_fxnTable</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
</div><!-- contents -->
<!-- HTML footer for doxygen 1.8.9.1-->
<!-- start footer part -->
<hr class="footer"/><small>
Copyright  2015, Texas Instruments Incorporated
</small>
</body>
</html>
