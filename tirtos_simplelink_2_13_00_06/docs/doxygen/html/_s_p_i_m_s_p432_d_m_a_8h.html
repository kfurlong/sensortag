<!-- HTML header for doxygen 1.8.9.1-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.9.1"/>
<title>TI-RTOS for SimpleLink Wireless MCUs: SPIMSP432DMA.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<table width="100%">
<tr>
  <td bgcolor="black" width="1"><a href="http://www.ti.com"><img border="0" src="tilogo.gif" /></a></td>
  <td bgcolor="red"><img src="titagline.gif" /></td>
</tr>
</table>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">TI-RTOS for SimpleLink Wireless MCUs
   &#160;<span id="projectnumber">2.13.00.06</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.9.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_b7f13d33c9ff829e41eca277e5b10f32.html">tirtos_simplelink_2_13_00_06</a></li><li class="navelem"><a class="el" href="dir_914ef8c92054fbd19b873011105ec041.html">packages</a></li><li class="navelem"><a class="el" href="dir_abd11468e5a5b51896344ba99410f96c.html">ti</a></li><li class="navelem"><a class="el" href="dir_91d6028ef0aa1035242bfefa07cd806e.html">drivers</a></li><li class="navelem"><a class="el" href="dir_06c335b5d26ee58949e52d1dc1675348.html">spi</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">SPIMSP432DMA.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>SPI driver implementation for a EUSCI peripheral on MSP432 using the micro DMA controller. </p>
<p>============================================================================</p>
<p>The SPI header file should be included in an application as follows: </p><div class="fragment"><div class="line"><span class="preprocessor">#include &lt;<a class="code" href="_s_p_i_8h.html">ti/drivers/SPI.h</a>&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;<a class="code" href="_s_p_i_m_s_p432_d_m_a_8h.html">ti/drivers/spi/SPIMSP432DMA.h</a>&gt;</span></div>
</div><!-- fragment --><p>This SPI driver implementation is designed to operate on a EUCSI controller in SPI mode.</p>
<h2>SPI Chip Select</h2>
<p>The SPIMSP432DMA operates the controller in 3-pin mode; therefore it is not safe to use in a multi-master SPI bus environment. It is the application's responsibility to assert and de-assert a GPIO pin for chip select purposes.</p>
<table class="doxtable">
<tr>
<th>Chip select type </th><th>SPI_MASTER mode </th><th>SPI_SLAVE mode  </th></tr>
<tr>
<td>Hardware chip select </td><td>Not available on this peripheral.  </td></tr>
<tr>
<td>Software chip select </td><td>The application is responsible to ensure that correct SPI slave is selected before performing a <a class="el" href="_s_p_i_8h.html#a989e17f96b54fcc3dc2cac5f8ac6bdb2" title="Function to perform SPI transactions. ">SPI_transfer()</a>. </td><td>Up to the application's implementation.  </td></tr>
</table>
<h2>DMA Interrupts</h2>
<p>The MSP432 DMA controller has 4 interrupt vectors to handle all DMA related IRQ. Due to the "shared" nature of the DMA interrupts, this driver implementation requires each SPI instance to explicitly use a single DMA interrupt. It is up to the application to ensure no two peripherals are configured to respond to a given DMA interrupt at any moment.</p>
<h2>Scratch Buffers</h2>
<p>A uint32_t scratch buffer is used to allow SPI_transfers where txBuf or rxBuf are NULL. Rather than requiring txBuf or rxBuf to have a dummy buffer of size of the transfer count, a single DMA accessible uint32_t scratch buffer is used. When txBuf is NULL, an internal scratch buffer is initialized to the defaultTxBufValue so the DMA will send some known value. Each SPI driver instance should uses its own scratch buffer.</p>
<h2>SPI data frames</h2>
<p>The EUSCI controller only supports 8-bit data frames.</p>
<table class="doxtable">
<tr>
<th>dataSize </th><th>buffer element size  </th></tr>
<tr>
<td>8 bits </td><td>uint8_t </td></tr>
</table>
<h2>DMA transfer size limit</h2>
<p>The DMA contoller only supports data transfers of upto 1024 data frames. Each SPI driver instance requires 2 DMA channels (Tx and Rx) to operate.</p>
<h2>DMA accessible memory</h2>
<p>Ensure that the txBuf and rxBuf (in <a class="el" href="struct_s_p_i___transaction.html" title="A SPI_Transaction data structure is used with SPI_transfer(). It indicates how many SPI_FrameFormat f...">SPI_Transaction</a>) point to memory that is accessible by the DMA. </p><hr/>
</div><div class="textblock"><code>#include &lt;stdint.h&gt;</code><br />
<code>#include &lt;<a class="el" href="_hwi_p_8h_source.html">ti/drivers/ports/HwiP.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="_semaphore_p_8h_source.html">ti/drivers/ports/SemaphoreP.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="_power_8h_source.html">ti/drivers/Power.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="_s_p_i_8h_source.html">ti/drivers/SPI.h</a>&gt;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for SPIMSP432DMA.h:</div>
<div class="dyncontent">
<div class="center"><img src="_s_p_i_m_s_p432_d_m_a_8h__incl.png" border="0" usemap="#_s_p_i_m_s_p432_d_m_a_8h" alt=""/></div>
<map name="_s_p_i_m_s_p432_d_m_a_8h" id="_s_p_i_m_s_p432_d_m_a_8h">
<area shape="rect" href="_hwi_p_8h.html" title="Hardware Interrupt module for the RTOS Porting Interface. " alt="" coords="634,158,784,182" /><area shape="rect" href="_semaphore_p_8h.html" title="Semaphore module for the RTOS Porting Interface. " alt="" coords="282,158,480,182" /><area shape="rect" href="_power_8h.html" title="Power manager interface. " alt="" coords="122,84,245,108" /><area shape="rect" href="_s_p_i_8h.html" title="SPI driver interface. " alt="" coords="504,158,610,182" /><area shape="rect" href="_list_p_8h.html" title="Linked List interface for the RTOS Ports Interface. " alt="" coords="109,158,258,182" /></map>
</div>
</div>
<p><a href="_s_p_i_m_s_p432_d_m_a_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_s_p_i_m_s_p432_d_m_a___h_w_attrs.html">SPIMSP432DMA_HWAttrs</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">SPIMSP432DMA Hardware attributes These fields are used by driverlib APIs and therefore must be populated by driverlib macro definitions. For MSP430Ware these definitions are found in:  <a href="struct_s_p_i_m_s_p432_d_m_a___h_w_attrs.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_s_p_i_m_s_p432_d_m_a___object.html">SPIMSP432DMA_Object</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">SPIMSP432DMA Object.  <a href="struct_s_p_i_m_s_p432_d_m_a___object.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:a3c134f41d4b331c52e9689b1fa4df451"><td class="memItemLeft" align="right" valign="top">typedef struct <a class="el" href="struct_s_p_i_m_s_p432_d_m_a___h_w_attrs.html">SPIMSP432DMA_HWAttrs</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_s_p_i_m_s_p432_d_m_a_8h.html#a3c134f41d4b331c52e9689b1fa4df451">SPIMSP432DMA_HWAttrs</a></td></tr>
<tr class="memdesc:a3c134f41d4b331c52e9689b1fa4df451"><td class="mdescLeft">&#160;</td><td class="mdescRight">SPIMSP432DMA Hardware attributes These fields are used by driverlib APIs and therefore must be populated by driverlib macro definitions. For MSP430Ware these definitions are found in:  <a href="#a3c134f41d4b331c52e9689b1fa4df451">More...</a><br /></td></tr>
<tr class="separator:a3c134f41d4b331c52e9689b1fa4df451"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8ace92c08f232b6bf494eaf2636f5f40"><td class="memItemLeft" align="right" valign="top">typedef struct <a class="el" href="struct_s_p_i_m_s_p432_d_m_a___object.html">SPIMSP432DMA_Object</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_s_p_i_m_s_p432_d_m_a_8h.html#a8ace92c08f232b6bf494eaf2636f5f40">SPIMSP432DMA_Object</a></td></tr>
<tr class="memdesc:a8ace92c08f232b6bf494eaf2636f5f40"><td class="mdescLeft">&#160;</td><td class="mdescRight">SPIMSP432DMA Object.  <a href="#a8ace92c08f232b6bf494eaf2636f5f40">More...</a><br /></td></tr>
<tr class="separator:a8ace92c08f232b6bf494eaf2636f5f40"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad9225ceabbfa997521f48546a58b0e1d"><td class="memItemLeft" align="right" valign="top">typedef struct <a class="el" href="struct_s_p_i_m_s_p432_d_m_a___object.html">SPIMSP432DMA_Object</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_s_p_i_m_s_p432_d_m_a_8h.html#ad9225ceabbfa997521f48546a58b0e1d">SPIMSP432DMA_Handle</a></td></tr>
<tr class="separator:ad9225ceabbfa997521f48546a58b0e1d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:aee524b32bcdc37f4035099dff00abbc2"><td class="memItemLeft" align="right" valign="top">const <a class="el" href="struct_s_p_i___fxn_table.html">SPI_FxnTable</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_s_p_i_m_s_p432_d_m_a_8h.html#aee524b32bcdc37f4035099dff00abbc2">SPIMSP432DMA_fxnTable</a></td></tr>
<tr class="separator:aee524b32bcdc37f4035099dff00abbc2"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Typedef Documentation</h2>
<a class="anchor" id="a3c134f41d4b331c52e9689b1fa4df451"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct <a class="el" href="struct_s_p_i_m_s_p432_d_m_a___h_w_attrs.html">SPIMSP432DMA_HWAttrs</a>  <a class="el" href="struct_s_p_i_m_s_p432_d_m_a___h_w_attrs.html">SPIMSP432DMA_HWAttrs</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>SPIMSP432DMA Hardware attributes These fields are used by driverlib APIs and therefore must be populated by driverlib macro definitions. For MSP430Ware these definitions are found in: </p>
<ul>
<li>dma.h</li>
<li>spi.h</li>
</ul>
<p>A sample structure is shown below: </p><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;const SPIMSP432DMA_HWAttrs spiMSP432DMAHWAttrs[] = {</div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;    {</div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;        .baseAddr = EUSCI_B0_BASE,</div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;        .clockSource = EUSCI_B_SPI_CLOCKSOURCE_SMCLK,</div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;        .bitOrder = EUSCI_B_SPI_MSB_FIRST,</div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;</div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;        .defaultTxBufValue = 0,</div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;</div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;        .dmaIntNum = INT_DMA_INT1,</div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;        .intPriority = ~0,</div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;        .rxDMAChannelIndex = DMA_CH1_EUSCIB0RX0,</div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;        .txDMAChannelIndex = DMA_CH0_EUSCIB0TX0</div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;    },</div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;    {</div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;        .baseAddr = EUSCI_B2_BASE,</div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;        .clockSource = EUSCI_B_SPI_CLOCKSOURCE_SMCLK,</div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;        .bitOrder = EUSCI_B_SPI_MSB_FIRST,</div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;</div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;        .defaultTxBufValue = 0,</div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;</div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;        .dmaIntNum = INT_DMA_INT2,</div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;        .intPriority = ~0,</div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;        .rxDMAChannelIndex = DMA_CH5_EUSCIB2RX0,</div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;        .txDMAChannelIndex = DMA_CH4_EUSCIB2TX0</div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;    }</div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;};</div>
</div><!-- fragment --> 
</div>
</div>
<a class="anchor" id="a8ace92c08f232b6bf494eaf2636f5f40"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct <a class="el" href="struct_s_p_i_m_s_p432_d_m_a___object.html">SPIMSP432DMA_Object</a>  <a class="el" href="struct_s_p_i_m_s_p432_d_m_a___object.html">SPIMSP432DMA_Object</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>SPIMSP432DMA Object. </p>
<p>The application must not access any member variables of this structure! </p>

</div>
</div>
<a class="anchor" id="ad9225ceabbfa997521f48546a58b0e1d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct <a class="el" href="struct_s_p_i_m_s_p432_d_m_a___object.html">SPIMSP432DMA_Object</a> * <a class="el" href="_s_p_i_m_s_p432_d_m_a_8h.html#ad9225ceabbfa997521f48546a58b0e1d">SPIMSP432DMA_Handle</a></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a class="anchor" id="aee524b32bcdc37f4035099dff00abbc2"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="struct_s_p_i___fxn_table.html">SPI_FxnTable</a> SPIMSP432DMA_fxnTable</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
</div><!-- contents -->
<!-- HTML footer for doxygen 1.8.9.1-->
<!-- start footer part -->
<hr class="footer"/><small>
Copyright  2015, Texas Instruments Incorporated
</small>
</body>
</html>
